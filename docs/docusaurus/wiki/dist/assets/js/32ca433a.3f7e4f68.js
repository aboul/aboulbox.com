"use strict";(self.webpackChunkwiki=self.webpackChunkwiki||[]).push([[5531],{7145:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>d,metadata:()=>t,toc:()=>u});const t=JSON.parse('{"id":"deployment","title":"D\xe9ploiement","description":"J\'utilise Komodo \xe0 la fois pour mon environnement de d\xe9veloppement et mon environnement de production pour plus de simplicit\xe9 et pour pouvoir tester ma stack en local facilement.","source":"@site/docs/04-deployment.md","sourceDirName":".","slug":"/deployment","permalink":"/deployment","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Adding Services","permalink":"/adding-services"},"next":{"title":"Maintenance","permalink":"/maintenance"}}');var r=o(4848),i=o(8453);const d={},s="D\xe9ploiement",l={},u=[{value:"Production",id:"production",level:2},{value:"Push --&gt; Github Webhooks --&gt; Komodo",id:"push----github-webhooks----komodo",level:3}];function c(e){const n={h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"d\xe9ploiement",children:"D\xe9ploiement"})}),"\n",(0,r.jsx)(n.p,{children:"J'utilise Komodo \xe0 la fois pour mon environnement de d\xe9veloppement et mon environnement de production pour plus de simplicit\xe9 et pour pouvoir tester ma stack en local facilement.\nPrenons la stack prod sur Komodo :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"1 Repos : aboul/aboulbox.com"}),"\n",(0,r.jsx)(n.li,{children:"1 Service = 1 Stack"}),"\n",(0,r.jsx)(n.li,{children:"1 Proc\xe9dure pour la prod"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"production",children:"Production"}),"\n",(0,r.jsx)(n.h3,{id:"push----github-webhooks----komodo",children:"Push --\x3e Github Webhooks --\x3e Komodo"}),"\n",(0,r.jsx)(n.p,{children:"Chaque push sur mon repo github d\xe9clenche une proc\xe9dure Komodo."}),"\n",(0,r.jsx)(n.mermaid,{value:'\nflowchart TD\n\n  %% ===== Github Event =====\n  subgraph EVENT["D\xe9veloppement"]\n    A@{ shape: rounded, label: "Git Push<br />(branch main)" }\n  end\n\n  %% ===== Github Webhook =====\n  webhook(["Github Webhook"])\n\n  %% ===== Komodo =====\n  subgraph KOMODO["Komodo"]\n    direction LR\n    PROCEDURE\n    STACK\n  end\n\n  %% ===== Procedure =====\n  push(["Pull Repositiry"])\n  redeploy(["Redeploy docker stack"])\n  redeploy2(["Redeploy docker Caddy"])\n  subgraph PROCEDURE["Proc\xe9dure"]\n    direction TB\n    push --\x3e redeploy --\x3e redeploy2\n    redeploy --\x3e STACK\n    redeploy2 --\x3e STACK\n  end\n\n  %% ===== Stacks =====\n  compose(["docker compose files"])\n  env(["Create .env file"])\n  build(["Build / Start stack"])\n  subgraph STACK["Stack"]\n    direction TB\n    compose --\x3e build\n    env --\x3e build\n  end\n\n  %% ===== Flows =====\n  EVENT --\x3e webhook --\x3e KOMODO'})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>d,x:()=>s});var t=o(6540);const r={},i=t.createContext(r);function d(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);