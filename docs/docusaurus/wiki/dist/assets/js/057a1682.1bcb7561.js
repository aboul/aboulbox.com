"use strict";(self.webpackChunkwiki=self.webpackChunkwiki||[]).push([[3457],{5638:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>t,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"stack-overview","title":"Vue d\'ensemble de la stack","description":"Services","source":"@site/docs/01-stack-overview.md","sourceDirName":".","slug":"/stack-overview","permalink":"/stack-overview","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Intro","permalink":"/"},"next":{"title":"Secrets And Configuration","permalink":"/secrets-and-configuration"}}');var r=n(4848),a=n(8453);const c={},l="Vue d'ensemble de la stack",t={},d=[{value:"Services",id:"services",level:2},{value:"Sch\xe9ma r\xe9seau",id:"sch\xe9ma-r\xe9seau",level:2}];function o(e){const s={a:"a",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"vue-densemble-de-la-stack",children:"Vue d'ensemble de la stack"})}),"\n",(0,r.jsx)(s.h2,{id:"services",children:"Services"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"Services/caddy",children:"Caddy"})})," : reverse proxy, TLS et routage des sous-domaines"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"Services/authelia",children:"Authelia"})})," : authentification OIDC, reverse_auth","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"Services/database",children:"DB Authelia"})})," : base de donn\xe9es Postgres pour Authelia"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"Services/redis",children:"Redis Authelia"})})," : redis pour Authelia"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"Services/website",children:"Webite"})})," : site web principal (framework Astro)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"Services/umami",children:"Umami"})})," : analytics pour site web principtal"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"Services/backend",children:"Backend"})})," : endpoint pour formulaire de contact (expressJS)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"Services/directus",children:"Directus"})})," : CMS / backend"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"Services/immich",children:"Immich"})})," : service photos","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"Services/redis",children:"Redis"})})," : pour Immich"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"Services/navidrome",children:"Navidrome"})})," : musique"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"Services/docusaurus",children:"Docusaurus"})})," : documentation"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"Services/homepage",children:"Homepage"})})," : dashboard d'accueil"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"Services/glances",children:"Glances"})})," : monitoring simple"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"Services/database",children:"Database"})})," : base de donn\xe9e Postgres pour Umami, Immich, Directus / Backend"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"sch\xe9ma-r\xe9seau",children:"Sch\xe9ma r\xe9seau"}),"\n",(0,r.jsx)(s.mermaid,{value:'flowchart TD\n  %%{init: {\n    "themeVariables": {\n      "fontSize": "38px"\n    },\n    "flowchart": {\n      "curve": "linear"\n    }\n  }}%%\n  %% ===== User =====\n  User["Utilisateur&nbsp;/&nbsp;Clients"]\n\n  %% ===== Proxy =====\n  PROXY["Caddy<br/>Reverse&nbsp;Proxy<br/>TLS&nbsp;/&nbsp;Routing"]\n\n  User --\x3e PROXY\n\n  %% ===== Auth =====\n  subgraph AUTH["Auth&nbsp;&&nbsp;OIDC"]\n    Authelia["Authelia<br/>(OIDC&nbsp;/&nbsp;Forward&nbsp;Auth)"]\n    AutheliaRedis["Redis<br/>(Sessions)"]\n    AutheliaDB["PostgreSQL"]\n  end\n\n  PROXY <-- "forward_auth" --\x3e AUTH\n\n  %% ===== Applications =====\n  subgraph APPS["Applications"]\n    subgraph Padding[" "]\n      Website["Website<br/>(Astro)"]\n      Backend["Backend<br/>(ExpressJS)"]\n      Immich["Immich"]\n      Directus["Directus<br/>(Admin)"]\n      Navidrome["Navidrome<br/>(Music)"]\n      Umami["Umami<br/>(Analytics)"]\n      Docusaurus["Docusaurus<br/>(Docs)"]\n      Homepage["Homepage<br/>(Dashboard)"]\n      Glances["Glances"]\n    end\n  end\n\n  %% ===== Data Layer =====\n  subgraph DATA["Data Layer"]\n    subgraph PaddingDataLayer[" "]\n      Redis["Redis"]\n      subgraph DBS["Databases"]\n        subgraph PaddingDatabase[" "]\n        DB_Immich["immich"]\n        DB_Umami["umami"]\n        DB_Main["backend<br/> "]\n        end \n      end\n      Postgres["PostgreSQL<br/>(single service)"]\n    end\n  end\n\n  %% ===== Flows =====\n\n\n  PROXY --\x3e APPS\n\n  Authelia --\x3e AutheliaRedis\n  Authelia --\x3e AutheliaDB\n\n  AUTH <-- "OIDC" --\x3e Immich\n  AUTH <-- "OIDC" --\x3e Directus\n\n  Immich --\x3e DB_Immich\n  Immich --\x3e Redis\n  Directus --\x3e DB_Main\n  Backend --\x3e DB_Main\n  Umami --\x3e DB_Umami\n\n  DB_Immich --\x3e Postgres\n  DB_Umami --\x3e Postgres\n  DB_Main --\x3e Postgres\n\n  %% ===== Styles =====\n  classDef user fill:#F6B26B,stroke:#000,color:#000;\n  classDef proxy fill:#FFD966,stroke:#000,color:#000;\n  classDef auth fill:#6FA8DC,stroke:#000,color:#000;\n  classDef app fill:#93C47D,stroke:#000,color:#000;\n  classDef media fill:#E06666,stroke:#000,color:#fff;\n  classDef doc fill:#C27BA0,stroke:#000,color:#fff;\n  classDef analytics fill:#8E7CC3,stroke:#000,color:#fff;\n  classDef infra fill:#999999,stroke:#000,color:#fff;\n  classDef db fill:#444444,stroke:#000,color:#fff;\n  classDef padding fill:none,stroke:none;\n  classDef monitoring fill:#8E7CC3,stroke:#000,color:#fff;\n\n  class User user\n  class PROXY proxy\n  class Authelia auth\n  class AutheliaRedis infra\n  class AutheliaDB infra\n  class Website app\n  class Backend app\n  class Immich media\n  class ImmichApp app\n  class ImmichRedis infra\n  class Directus app\n  class Navidrome media\n  class Umami analytics\n  class Docusaurus doc\n  class Homepage app\n  class Postgres infra\n  class DB_Immich,DB_Umami,DB_Main db\n  class Glances monitoring\n  class Redis infra\n  class Padding padding\n  class PaddingDataLayer padding\n  class PaddingDatabase padding\n'})]})}function h(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>l});var i=n(6540);const r={},a=i.createContext(r);function c(e){const s=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(a.Provider,{value:s},e.children)}}}]);